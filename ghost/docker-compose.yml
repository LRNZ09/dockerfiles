version: '3.4'

services:

  ghost:
    deploy:
      labels: {
        traefik.frontend.rule: 'Host:lrnz09.me',
        traefik.port: 80
      }
      mode: replicated
      # restart_policy: {condition: on-failure, delay: 5s, max_attempts: 3, window: 10s}
      # update_config: {delay: 10s, failure_action: rollback, order: start-first, parallelism: 2}
      replicas: 3
    image: ghost:alpine
    networks: [traefik_default]
    volumes: [
      './config.json:/var/lib/ghost/config.production.json',
      './content:/var/lib/ghost/content'
    ]

networks:

  traefik_default:
    external: true
